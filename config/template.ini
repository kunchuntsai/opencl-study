# =============================================================================
# OpenCL Framework Configuration Template
# =============================================================================
# This template documents all available configuration options for the OpenCL
# image processing framework. Copy this file and rename it to your algorithm
# name (e.g., gaussian5x5.ini) to create a new configuration.
#
# Note: op_id is auto-derived from filename (gaussian5x5.ini -> op_id = gaussian5x5)
# =============================================================================

# -----------------------------------------------------------------------------
# [input] - Input Image Selection
# -----------------------------------------------------------------------------
# Selects which input image to use from config/inputs.ini
# Available image IDs are defined in config/inputs.ini as [image_N] sections
[input]
input_image_id = image_1                # Reference to [image_1] in config/inputs.ini
                                        # Options: image_1, image_2, etc.

# -----------------------------------------------------------------------------
# [output] - Output Image Selection
# -----------------------------------------------------------------------------
# Selects which output configuration to use from config/outputs.ini
# Available output IDs are defined in config/outputs.ini as [output_N] sections
[output]
output_image_id = output_1              # Reference to [output_1] in config/outputs.ini
                                        # Options: output_1, output_2, etc.

# -----------------------------------------------------------------------------
# [verification] - Result Verification Settings
# -----------------------------------------------------------------------------
# Configures how GPU output is verified against golden reference
#
# Golden sample sources:
#   c_ref  - Generate golden from C reference implementation (default)
#   file   - Load pre-computed golden binary (skips C reference execution)
[verification]
tolerance = 0                           # Max per-pixel difference allowed
                                        # 0 = exact match, 1 = allow +/-1 difference
error_rate_threshold = 0.0              # Max fraction of pixels that can exceed tolerance
                                        # 0.0 = all must pass, 0.001 = 0.1% can fail
# golden_source = c_ref                 # Default: generate from C reference
# golden_source = file                  # Alternative: load from file
# golden_file = test_data/algo/golden.bin  # Path to pre-computed golden (when source=file)

# -----------------------------------------------------------------------------
# [scalar.<name>] - Custom Scalar Arguments
# -----------------------------------------------------------------------------
# Defines scalar values to pass to the kernel
# Section name format: [scalar.<name>] where <name> is the parameter name
#
# Supported types:
#   int    - 32-bit signed integer
#   float  - 32-bit floating point
#   size_t - Platform-specific size type (alias: size)
#
# Example: Gaussian blur sigma parameter
[scalar.sigma]
type = float
value = 1.4

# Example: Kernel radius
[scalar.kernel_radius]
type = int
value = 2

# Example: Boolean flag (as int: 0=false, 1=true)
[scalar.normalize]
type = int
value = 1

# Example: Size type parameter
# [scalar.buffer_size]
# type = size_t
# value = 1920 * 1080 * 4                # Supports arithmetic expressions

# -----------------------------------------------------------------------------
# [buffer.<name>] - Custom Buffer Definitions
# -----------------------------------------------------------------------------
# Defines additional OpenCL buffers beyond input/output
# Section name format: [buffer.<name>] where <name> is the buffer identifier
#
# Buffer types (OpenCL memory flags):
#   READ_ONLY   - CL_MEM_READ_ONLY (kernel can only read)
#   WRITE_ONLY  - CL_MEM_WRITE_ONLY (kernel can only write)
#   READ_WRITE  - CL_MEM_READ_WRITE (kernel can read and write)
#
# Two buffer modes:
#   1. Empty buffer: specify size_bytes only (allocated but not initialized)
#   2. File-backed: specify source_file, data_type, and num_elements
#
# Data types for file-backed buffers:
#   float  - 32-bit floating point (4 bytes)
#   int    - 32-bit signed integer (4 bytes)
#   short  - 16-bit signed integer (2 bytes)
#   uchar  - 8-bit unsigned char (1 byte)

# Example: Empty scratch buffer (for intermediate results)
[buffer.tmp_global]
type = READ_WRITE
size_bytes = 1920 * 1080 * 4            # Supports arithmetic: *, +, -

# Example: File-backed read-only buffer (pre-computed kernel weights)
[buffer.kernel_weights]
type = READ_ONLY
data_type = float
num_elements = 25                       # e.g., 5x5 filter kernel
source_file = test_data/algo/weights.bin

# Example: Second scratch buffer
# [buffer.tmp_buffer2]
# type = READ_WRITE
# size_bytes = 512000

# -----------------------------------------------------------------------------
# [kernel.<variant>] - Kernel Variant Configurations
# -----------------------------------------------------------------------------
# Defines OpenCL kernel execution parameters
# Section name format: [kernel.v<N>] where N is the variant number (0, 1, 2, ...)
# The variant number is auto-extracted from the section name
#
# Multiple variants can be defined to test different implementations

# Variant 0: Basic implementation
[kernel.v0]
# Host API type:
#   standard      - Standard OpenCL API (default)
#   cl_extension  - Custom CL extension API framework
host_type = standard

# Kernel source file path (relative to project root)
kernel_file = examples/algo/cl/algo_v0.cl

# Function name in the .cl file
kernel_function = algo_kernel

# Work dimensions (1, 2, or 3)
work_dim = 2

# Global work size (total work items per dimension)
# Format: x,y or x,y,z (comma-separated, no spaces)
global_work_size = 1920,1080

# Local work size (work items per work group)
# Format: x,y or x,y,z (must evenly divide global_work_size)
local_work_size = 16,16

# -----------------------------------------------------------------------------
# Kernel Arguments (kernel_args)
# -----------------------------------------------------------------------------
# Defines the order and types of kernel arguments
#
# Format: kernel_args = {type, source} {type, source} ...
#
# Argument types:
#   input   - Input image buffer (cl_mem from input_image_id)
#   output  - Output image buffer (cl_mem from output_image_id)
#   buffer  - Custom buffer by name (defined in [buffer.<name>] sections)
#   int     - Integer scalar (from [scalar.<name>] or built-in params)
#   float   - Float scalar (from [scalar.<name>] or built-in params)
#   size_t  - Size_t scalar (from [scalar.<name>] or built-in params)
#
# Source names:
#   For input/output: use "input" or "output" (or the image_id)
#   For buffer: use the buffer name from [buffer.<name>]
#   For scalars: use scalar name from [scalar.<name>] or built-in:
#     Built-in params: src_width, src_height, src_channels, src_stride,
#                      dst_width, dst_height, dst_channels, dst_stride
#
# Single-line format:
kernel_args = {input, input} {output, output} {int, src_width} {int, src_height}

# Multi-line format (for complex kernels):
# kernel_args = {
#     {input, input}
#     {output, output}
#     {buffer, tmp_global}
#     {buffer, kernel_weights}
#     {float, sigma}
#     {int, kernel_radius}
#     {int, src_width}
#     {int, src_height}
# }

# -----------------------------------------------------------------------------
# Kernel Argument Examples
# -----------------------------------------------------------------------------
# Example 1: Simple image filter (input -> output with dimensions)
# __kernel void simple_filter(
#     __global const uchar* input,    // {input, input}
#     __global uchar* output,         // {output, output}
#     int width,                      // {int, src_width}
#     int height)                     // {int, src_height}
#
# kernel_args = {input, input} {output, output} {int, src_width} {int, src_height}
#
# Example 2: Gaussian blur with custom scalars and buffers
# __kernel void gaussian_blur(
#     __global const uchar* input,    // {input, input}
#     __global uchar* output,         // {output, output}
#     __global float* tmp_buffer,     // {buffer, tmp_global}
#     __global const float* weights,  // {buffer, kernel_weights}
#     float sigma,                    // {float, sigma}
#     int radius,                     // {int, kernel_radius}
#     int width,                      // {int, src_width}
#     int height)                     // {int, src_height}
#
# kernel_args = {
#     {input, input}
#     {output, output}
#     {buffer, tmp_global}
#     {buffer, kernel_weights}
#     {float, sigma}
#     {int, kernel_radius}
#     {int, src_width}
#     {int, src_height}
# }
#
# Example 3: Using output dimensions (for resize operations)
# __kernel void resize(
#     __global const uchar* input,    // {input, input}
#     __global uchar* output,         // {output, output}
#     int src_width,                  // {int, src_width}
#     int src_height,                 // {int, src_height}
#     int dst_width,                  // {int, dst_width}
#     int dst_height)                 // {int, dst_height}
#
# kernel_args = {
#     {input, input}
#     {output, output}
#     {int, src_width}
#     {int, src_height}
#     {int, dst_width}
#     {int, dst_height}
# }

# Variant 1: Optimized implementation with custom extension
# [kernel.v1]
# host_type = cl_extension
# kernel_file = examples/algo/cl/algo_v1.cl
# kernel_function = algo_kernel_optimized
# work_dim = 2
# global_work_size = 1920,1088           # Aligned to work group size
# local_work_size = 16,16
# kernel_args = {
#     {input, input}
#     {output, output}
#     {buffer, tmp_global}
#     {size_t, buffer_size}
#     {float, sigma}
#     {int, normalize}
# }

# =============================================================================
# Complete Example: Gaussian 5x5 Blur
# =============================================================================
# Below is a complete example for a Gaussian 5x5 blur algorithm
# Uncomment and modify as needed
#
# [input]
# input_image_id = image_2
#
# [output]
# output_image_id = output_2
#
# [verification]
# tolerance = 1
# error_rate_threshold = 0.001
#
# [scalar.sigma]
# type = float
# value = 1.4
#
# [scalar.kernel_radius]
# type = int
# value = 2
#
# [buffer.horizontal_weights]
# type = READ_ONLY
# data_type = float
# num_elements = 5
# source_file = test_data/gaussian5x5/kernel_x.bin
#
# [buffer.vertical_weights]
# type = READ_ONLY
# data_type = float
# num_elements = 5
# source_file = test_data/gaussian5x5/kernel_y.bin
#
# [buffer.intermediate]
# type = READ_WRITE
# size_bytes = 1920 * 1088 * 4
#
# [kernel.v0]
# host_type = standard
# kernel_file = examples/gaussian5x5/cl/gaussian5x5.cl
# kernel_function = gaussian5x5_blur
# work_dim = 2
# global_work_size = 1920,1080
# local_work_size = 16,16
# kernel_args = {
#     {input, input}
#     {output, output}
#     {buffer, horizontal_weights}
#     {buffer, vertical_weights}
#     {buffer, intermediate}
#     {float, sigma}
#     {int, kernel_radius}
#     {int, src_width}
#     {int, src_height}
# }
