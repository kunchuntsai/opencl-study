<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080">
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="9" refX="11" refY="4.5" orient="auto">
      <polygon points="0 0, 12 4.5, 0 9" fill="#ffbb62"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1920" height="1080" fill="#ffffff"/>

  <!-- Title -->
  <text x="960" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#666666">Splitting Host Flow: Compilation vs Execution</text>
  <text x="960" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" fill="#8b7355">From 6 monolithic steps to two independent phases</text>

  <!-- ============ Original 6 Steps (Top Center) ============ -->
  <rect x="360" y="120" width="1200" height="80" rx="12" fill="#fff8f0" stroke="#ffbb62" stroke-width="3"/>
  <text x="960" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#666666">Original Monolithic Flow (6 Steps)</text>
  <text x="960" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" fill="#8b7355">Init -> Build -> Buffers -> Args -> Execute -> Release</text>

  <!-- Divider line -->
  <line x1="960" y1="210" x2="960" y2="260" stroke="#666666" stroke-width="3" stroke-dasharray="8,4"/>
  <text x="960" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">SPLIT INTO</text>

  <!-- ============ LEFT: Compilation Phase ============ -->
  <rect x="60" y="280" width="880" height="760" rx="20" fill="#fff8f0" stroke="#ffbb62" stroke-width="4"/>
  <text x="500" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#666666">Compilation Phase</text>
  <text x="500" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" fill="#8b7355">(Offline / Build Time - Linux)</text>

  <!-- Inputs -->
  <text x="110" y="410" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">Inputs:</text>

  <rect x="110" y="430" width="350" height="60" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="3"/>
  <text x="285" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">kernel.cl</text>
  <text x="285" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666666">OpenCL source</text>

  <rect x="480" y="430" width="350" height="60" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="3"/>
  <text x="655" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">config.json</text>
  <text x="655" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666666">Configuration</text>

  <!-- Arrow to steps -->
  <line x1="500" y1="500" x2="500" y2="530" stroke="#666666" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- Steps included -->
  <text x="110" y="565" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">Steps:</text>

  <!-- Step 1 -->
  <rect x="110" y="580" width="760" height="55" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="150" y="615" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#666666">1</text>
  <text x="500" y="612" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">OpenCL Initialization</text>

  <!-- Step 2 -->
  <rect x="110" y="645" width="760" height="55" rx="10" fill="#ffbb62" stroke="#666666" stroke-width="3"/>
  <text x="150" y="680" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#666666">2</text>
  <text x="500" y="677" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Build Program (JIT Compile)</text>

  <!-- Arrow to outputs -->
  <line x1="500" y1="710" x2="500" y2="745" stroke="#666666" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- Outputs -->
  <text x="110" y="780" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">Outputs:</text>

  <rect x="110" y="800" width="350" height="70" rx="10" fill="#ffbb62" stroke="#666666" stroke-width="3"/>
  <text x="285" y="835" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">kernel.bin</text>
  <text x="285" y="858" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666666">Compiled kernel binary</text>

  <rect x="480" y="800" width="350" height="70" rx="10" fill="#ffbb62" stroke="#666666" stroke-width="3"/>
  <text x="655" y="835" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">opencl_host</text>
  <text x="655" y="858" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666666">Android executable</text>

  <!-- Platform note -->
  <rect x="110" y="890" width="720" height="50" rx="8" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="470" y="922" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" fill="#666666">Runs on Linux, generates binaries for Android target</text>

  <!-- Timing -->
  <rect x="110" y="955" width="720" height="45" rx="8" fill="#fff8f0" stroke="#ffbb62" stroke-width="2"/>
  <text x="470" y="985" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" fill="#666666">~100ms compilation (done once per kernel change)</text>

  <!-- ============ RIGHT: Execution Phase ============ -->
  <rect x="980" y="280" width="880" height="760" rx="20" fill="#fff8f0" stroke="#ffbb62" stroke-width="4"/>
  <text x="1420" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#666666">Execution Phase</text>
  <text x="1420" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" fill="#8b7355">(Runtime - Linux or Android)</text>

  <!-- Inputs -->
  <text x="1030" y="410" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">Inputs:</text>

  <rect x="1030" y="430" width="240" height="60" rx="10" fill="#ffbb62" stroke="#666666" stroke-width="2" stroke-dasharray="6,3"/>
  <text x="1150" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">kernel.bin</text>
  <text x="1150" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666666">From compilation</text>

  <rect x="1290" y="430" width="240" height="60" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="3"/>
  <text x="1410" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">config.json</text>
  <text x="1410" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666666">Configuration</text>

  <rect x="1550" y="430" width="240" height="60" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="3"/>
  <text x="1670" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">input.bin</text>
  <text x="1670" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666666">Runtime data</text>

  <!-- Arrow to steps -->
  <line x1="1420" y1="500" x2="1420" y2="530" stroke="#666666" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- Steps included -->
  <text x="1030" y="565" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">Steps:</text>

  <!-- Step 3 -->
  <rect x="1030" y="580" width="760" height="45" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="1070" y="610" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">3</text>
  <text x="1420" y="608" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Create Buffers</text>

  <!-- Step 4 -->
  <rect x="1030" y="635" width="760" height="45" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="1070" y="665" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">4</text>
  <text x="1420" y="663" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Set Kernel Arguments</text>

  <!-- Step 5 -->
  <rect x="1030" y="690" width="760" height="45" rx="10" fill="#ffbb62" stroke="#666666" stroke-width="2"/>
  <text x="1070" y="720" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">5</text>
  <text x="1420" y="718" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Execute Kernel (NDRange)</text>

  <!-- Step 6 -->
  <rect x="1030" y="745" width="760" height="45" rx="10" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="1070" y="775" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">6</text>
  <text x="1420" y="773" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Finalize &amp; Release</text>

  <!-- Arrow to output -->
  <line x1="1420" y1="800" x2="1420" y2="830" stroke="#666666" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- Output -->
  <text x="1030" y="865" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#666666">Output:</text>

  <rect x="1280" y="840" width="280" height="60" rx="10" fill="#ffbb62" stroke="#666666" stroke-width="3"/>
  <text x="1420" y="875" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">result.out</text>

  <!-- Platform boxes -->
  <text x="1030" y="935" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#666666">Execution Environment:</text>

  <rect x="1030" y="950" width="350" height="55" rx="8" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="1205" y="975" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#666666">Linux</text>
  <text x="1205" y="995" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#8b7355">Same opencl_host as compile</text>

  <rect x="1410" y="950" width="350" height="55" rx="8" fill="#fff" stroke="#ffbb62" stroke-width="2"/>
  <text x="1585" y="975" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#666666">Android</text>
  <text x="1585" y="995" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#8b7355">Uses compiled opencl_host</text>

  <!-- ============ Transfer Arrow ============ -->
  <line x1="910" y1="835" x2="1010" y2="835" stroke="#666666" stroke-width="6" stroke-dasharray="10,5"/>
  <text x="960" y="815" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Binary</text>
  <text x="960" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#666666">Transfer</text>
</svg>
